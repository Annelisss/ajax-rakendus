@{
    ViewData["Title"] = "Lisa toode";
}

<h2>Lisa toode</h2>

<input type="text" id="productName" placeholder="Sisesta toote nimi" />
<button onclick="saveProduct()">Salvesta</button>

<p id="resultMessage" style="margin-top: 10px;"></p>

@section Scripts {
    <script>
        function saveProduct() {
            const name = document.getElementById("productName").value;

            fetch("/Product/SaveProduct", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ name: name })
            })
            .then(response => response.json())
            .then(data => {
                const messageElement = document.getElementById("resultMessage");
                if (data.success) {
                    messageElement.style.color = "green";
                } else {
                    messageElement.style.color = "red";
                }
                messageElement.innerText = data.message;
            })
            .catch(error => {
                document.getElementById("resultMessage").innerText = "Viga: " + error;
            });
        }
    </script>
}
